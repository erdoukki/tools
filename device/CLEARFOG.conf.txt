# https://www.solid-run.com/marvell-armada-family/clearfog/

export MAKE_ARGS_DEV="
CROSS_BINUTILS_PREFIX=/usr/local/arm-gnueabi-freebsd11.2/bin
UBLDR_LOADADDR=0x900000
"

export PRODUCT_TARGET=arm
export PRODUCT_ARCH=armv6
export PRODUCT_WANTS="arm-gnueabi-binutils qemu-user-static u-boot-clearfog"

export ARM_UBOOT_DIR="/usr/local/share/u-boot/u-boot-clearfog"

arm_install_uboot()
{
	arm_unmount
	dd if=${ARM_UBOOT_DIR}/u-boot-spl.kwb of=/dev/${DEV} bs=512 seek=1 conv=sync
	arm_mount
	cp ${ARM_UBOOT_DIR}/boot.scr ${STAGEDIR}/boot/msdos
	cp -p ${STAGEDIR}/boot/ubldr.bin ${STAGEDIR}/boot/msdos
	# These 2 lines need to be fixed, I don't know the specific file name for the moment.
	#cp -p ${STAGEDIR}/boot/dtb/clearfog.dtb ${STAGEDIR}/boot/msdos/clearfog.dtb
	#ln ${STAGEDIR}/boot/msdos/clearfog.dtb ${STAGEDIR}/boot/msdos/armada-388-helios4.dtb
}
